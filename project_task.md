Խնդրի նկարագրությունը

Տեղափոխվենք մեկ դար հետ։ Մեկնարկել է որեւէ մարզի էլեկտրաֆիկացման ծրագիրը։
Մարզպետը հանձնարարել է կառուցել էլեկտրակայաններ եւ հոսանքի բարձրավոլտ
գծեր, այնպես որ մարզի ամեն բնակավայր հասանելիություն ստանա էլեկտրական
հոսանքին։ Մեզանից պահանջվում է ներկայացնել էլեկտրաֆիկացման այնպիսի պլան,
որը կենթադրի մինիմալ ֆինանսական ծախսեր։
Մարզում գտնվում են N բնակավայրեր, որոնցից ամեն մեկն ունի իր չկրկնվող անունը։
Մի շարք «Ai» եւ «Bi» բնակավայրերի զույգերի համար մեզ հայտնի է իրենց միջեւ
բարձրավոլտ հոսանքի գիծ կառուցելու ֆինանսական ծախսը։ Մնացած բոլոր «Aj» եւ
«Bj» բնակավայրերի զույգերի համար հոսանքի գծեր կառուցելը խնդրահարույց է, ու չի
դիտարիվում։ Այդ պատճառով հնարավոր է ստացվի այնպես որ պետք լինի կառուցել
երկու կամ ավել էլեկտրական հոսանքի գեներատոր։ Յուրաքանչյու գեներատոր
կառուցվում է ինչ-որ բնակավայրում, ու այդ բնակավայրը ավտոմատ կերպով
էլեկտրաֆիկացվում է։
Մենք պետք է գրենք այնպիսի ծրագիր որը նշված տեղեկատվության հիման վրա
կհաշվարկի մինիմալ քանակի անհրաժեշտ գեներատորներ, եւ կթվարկի այն
բնակավայրերի անունները ու պետք է իրենց կառուցել։ Դրանից հետո ծրագիրը պետք է
թվարկի բոլոր այն բնակավայրերի զույգերը, որոնց միջեւ պետք է կառուցել հոսանքի
գծեր, որպիսի արդյունքում բոլոր N բնակավայրերը ստանան հոսանքին
հասանելիություն, եւ որպիսի այդ գծերի կառուցման համար գումարային ծախսը լինի
մինիմալ։ Վերջում ծրագիրը պետք է թվարկի բոլոր N բնակավայրերը խմբավորված ըստ
նրա, թե ո՞ր գեներատորից են իրենք սնուցվում։ Այնպես որ հասկանալի լինի թե ինչ-որ
էլեկտրական կայանի անջատման դեպքում, ո՞րբ բնակավայրերն են մնալու առանց
հոսանքի։

Մուտքային եւ ելքային տվյալներ

Մուտքում տրվում է N թիվը՝ մարզում առկա բնակավայրերի քանակը։ Այնուհետեւ N
տողերով թվարկվում են բնակավայրերի անվանումները։ Անվանումները լատինատառ
են, կազմված են մեծատառերից, փոքրատառերից եւ հնարավոր է «-» նշաննից։
Ինչից հետո մուտքային ֆայլում նշվում է K թիվը՝ բնակավայրերի այն զույգերի քանակը,
որոնց միջեւ հոսանքի գիծ կառուցելը դիտարկվում է։ Ամեն այդպիսի զույգ ներկայացված է
մի տողով, որն ունի «A B cost» ֆորմատը, ուր «A»-ն եւ «B»-ն բնակավայրերի
անվանումներն են, իսկ «cost-»-ը՝ իրենց միջը հոսանքի գիծ կառուցելու համար
անհրաժեշտ գումարը։

Ելքում ծրագիրը նախ պետք է նշի M թիվը՝ այն բնակավայրերի քանակը ուր պետք է
կառուցել էլեկտրական կայաններ։ Հաջորդ M տողերից ամեն մեկը պետք է սկսվի
այդպիսի հերթական բնակավայրի անվանմամբ, եւ կլոր փակագծերի մեջ պետք է
թվարկվեն այն մյուս բնակավայրերը, որոնք սնուցվելու են տվյալ բնակավայրի
էլեկտրակայանից։
Հաջորդ N-M տողերում պետք է թվարկվեն այն բնակավայրերի զույգերը, որոնց միջեւ
պետք է կառուցել էլեկտրական գծեր։
Ամենավերջին տողում պետք է նշվի գծերի կառուցման համար գումարային ծախսը։

Լուծման տարբերակ 2
(adj. list, Kruskal, DFS)

Պետք է ունենալ երկկողմանի արտապատկերում՝ բնակավայրերի անուններից դեպի [0,
N) ինդեքսներ, եւ հակառակը։ Բոլոր հաշվարկները պետք է կատարվեն ըստ այդ
ինդեքստների, իսկ անունները պետք է օգտագործվեն միայն ներմուծման եւ արտածման
ժամանակ։
Բնակավայրերի միջեւ հոսնքի հնարավոր գծերի բազմությունը պետք է պահել իբրեւ գրաֆ,
ներկայացված որպես «adjacency list»:

Մինիմալ կմախքային ծառի կառուցումը կատարել Կրուսկալի ալգորիթմի օգնությամբ։
Հոսանքի գեներատորների տեղադրումից հետո, այդ գեներատորից սնուցվող
բնակավայրերին պետք է հայտնաբերել DFS ալգորիթմի միջոցով։
Լուծումը պետք է կազմված լինի հետեւյալ դասերից (classes):
• Բնակավայրի անունը դեպի ինդեքսը, եւ հակառակ արտապատկերումը
կատարելու համար,
• Գրաֆի պահման համար,
• Կրուսկալի ալգորիթմի իրականացման համար,
• DFS ալգորիթմի կատարման համար։
